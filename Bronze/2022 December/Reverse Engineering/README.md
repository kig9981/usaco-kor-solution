# Reverse Engineering

입력 조건을 만족하는 프로그램 코드가 존재하는지를 찾는 문제입니다.

나이브한 방법은 가능한 모든 프로그램 코드를 생성한 뒤 입력에 맞는지 시뮬레이션해보는 것입니다.
$N$이 최대 100이고 프로그램 코드의 각 줄은 if condition과 return값이 있으므로 최악 $100!*2^{100}$개의 프로그램 코드가 생성될 수 있습니다.
시간복잡도 때문에 브루트포스로는 문제를 해결할 수 없으니 좀 더 그리디하게 생각해보겠습니다.

입력 조건을 만족하는 프로그램 코드의 첫 번째 줄은 어떤 내용이 올 수 있을지를 생각해봅시다.
예를 들어 if(b[0] == 0) return 0;인 코드가 첫 번째 줄에 온다면 입력의 b[0]가 0일 때 항상 0인 출력 값이 나올 것입니다.
하지만 b[0]가 1일 때는 0과 1인 출력이 모두 나올 수 있습니다.
따라서 프로그램 코드의 첫 번째 줄의 if 조건을 만족하는 입력은 항상 같은 값을 출력할 것입니다.

프로그램 코드의 두 번째 째줄은 첫 번째 줄에서 return되지 않은 값들이 입력으로 들어옵니다. 첫 번째 줄의 경우와 마찬가지로 두 번째 줄의 if 조건을 만족하는 입력은 출력값이 같아야 합니다.
즉, 첫 번째 줄의 조건에 맞지 않고 두 번째 줄의 조건에 맞은 입력은 항상 같은 값을 출력합니다.
좀 더 일반화해보면 i번째 줄의 프로그램 코드는 i줄보다 위에 있는 if 조건들에서 걸러지지 않은 값들을 입력으로 가지며, 이 입력값 중 자신의 조건에 맞는 입력은 출력값이 같습니다.

마지막으로 생각해야하는 부분은 순서입니다.
위의 조건을 통해 그리디하게 임의의 프로그램 코드를 작성할 수 있지만 코드를 작성하는 순서에 따라 결과가 달라질 수 있다는 위험이 있습니다. 하지만 몇 개의 예시를 통해 생각해보면 위의 조건에만 맞춰 프로그램 코드를 작성할 때 순서에 따라 출력값이 바뀌지 않음을 알 수 있습니다.